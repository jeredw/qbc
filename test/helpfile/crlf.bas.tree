(program 
  (statement 
    (deftype_statement DEFINT 
      (letter_range A - Z))) ' \r\n \r\n ' \r\n ' \r\n 
  (declare_statement DECLARE FUNCTION Backup$ 
    ( 
      (declare_parameter_list 
        (declare_parameter FileName$)) )) \r\n \r\n ' \r\n 
  (statement 
    (const_statement CONST 
      (const_assignment FALSE = 
        (const_expr 
          (expr 
            (literal 0)))) , 
      (const_assignment TRUE = 
        (const_expr 
          (expr NOT 
            (expr 
              (variable_or_function_call FALSE))))))) \r\n \r\n 
  (statement 
    (assignment_statement 
      (variable_or_function_call CarReturn$) = 
      (expr 
        (variable_or_function_call CHR$ 
          ( 
            (argument_list 
              (argument 
                (expr 
                  (literal 13)))) ))))) \r\n 
  (statement 
    (assignment_statement 
      (variable_or_function_call LineFeed$) = 
      (expr 
        (variable_or_function_call CHR$ 
          ( 
            (argument_list 
              (argument 
                (expr 
                  (literal 10)))) ))))) \r\n \r\n 
  (statement 
    (do_loop_statement DO 
      (block \r\n 
        (statement 
          (call_statement 
            (untyped_id CLS))) \r\n \r\n ' \r\n 
        (statement 
          (input_statement INPUT "Which file do you want to convert" ; 
            (variable_or_function_call OutFile$))) \r\n \r\n 
        (statement 
          (assignment_statement 
            (variable_or_function_call InFile$) = 
            (expr 
              (variable_or_function_call Backup$ 
                ( 
                  (argument_list 
                    (argument 
                      (expr 
                        (variable_or_function_call OutFile$)))) ))))) ' \r\n \r\n 
        (statement 
          (on_error_statement ON ERROR GOTO 
            (target 
              (text_label 
                (untyped_id ErrorHandler))))) ' \r\n \r\n 
        (statement 
          (name_statement NAME 
            (expr 
              (variable_or_function_call OutFile$)) AS 
            (expr 
              (variable_or_function_call InFile$)))) ' \r\n ' \r\n \r\n 
        (statement 
          (on_error_statement ON ERROR GOTO 
            (target 
              (line_number 0)))) ' \r\n \r\n ' \r\n ' \r\n 
        (statement 
          (open_statement OPEN 
            (expr 
              (variable_or_function_call InFile$)) FOR 
            (open_mode INPUT) AS # 
            (expr 
              (literal 1)))) \r\n 
        (statement 
          (open_statement OPEN 
            (expr 
              (variable_or_function_call OutFile$)) FOR 
            (open_mode OUTPUT) AS # 
            (expr 
              (literal 2)))) \r\n \r\n ' \r\n ' \r\n 
        (statement 
          (assignment_statement 
            (variable_or_function_call PrevCarReturn) = 
            (expr 
              (variable_or_function_call FALSE)))) \r\n \r\n ' \r\n ' \r\n 
        (statement 
          (do_loop_statement DO 
            (do_condition UNTIL 
              (expr 
                (variable_or_function_call EOF 
                  ( 
                    (argument_list 
                      (argument 
                        (expr 
                          (literal 1)))) )))) 
            (block \r\n \r\n ' \r\n 
              (statement 
                (assignment_statement 
                  (variable_or_function_call FileChar$) = 
                  (expr 
                    (builtin_function 
                      (input_function INPUT$ 
                        ( 
                          (expr 
                            (literal 1)) , # 
                          (expr 
                            (literal 1)) )))))) \r\n \r\n 
              (statement 
                (select_case_statement SELECT CASE 
                  (expr 
                    (variable_or_function_call FileChar$)) 
                  (before_first_case \r\n \r\n) 
                  (case_block 
                    (case_statement CASE 
                      (case_expr 
                        (expr 
                          (variable_or_function_call CarReturn$)))) 
                    (block ' \r\n \r\n ' \r\n ' \r\n 
                      (if_block_statement IF 
                        (expr 
                          (variable_or_function_call PrevCarReturn)) THEN \r\n 
                        (then_block 
                          (statement 
                            (assignment_statement 
                              (variable_or_function_call FileChar$) = 
                              (expr 
                                (expr 
                                  (variable_or_function_call LineFeed$)) + 
                                (expr 
                                  (variable_or_function_call FileChar$))))) \r\n) 
                        (end_if_statement END IF)) \r\n \r\n ' \r\n ' \r\n 
                      (statement 
                        (assignment_statement 
                          (variable_or_function_call PrevCarReturn) = 
                          (expr 
                            (variable_or_function_call TRUE)))) \r\n \r\n)) 
                  (case_block 
                    (case_statement CASE 
                      (case_expr 
                        (expr 
                          (variable_or_function_call LineFeed$)))) 
                    (block ' \r\n \r\n ' \r\n ' \r\n 
                      (if_block_statement IF 
                        (expr NOT 
                          (expr 
                            (variable_or_function_call PrevCarReturn))) THEN \r\n 
                        (then_block 
                          (statement 
                            (assignment_statement 
                              (variable_or_function_call FileChar$) = 
                              (expr 
                                (expr 
                                  (variable_or_function_call CarReturn$)) + 
                                (expr 
                                  (variable_or_function_call FileChar$))))) \r\n) 
                        (end_if_statement END IF)) \r\n \r\n ' \r\n ' \r\n 
                      (statement 
                        (assignment_statement 
                          (variable_or_function_call PrevCarReturn) = 
                          (expr 
                            (variable_or_function_call FALSE)))) \r\n \r\n)) 
                  (case_block 
                    (case_statement CASE ELSE) 
                    (block ' \r\n \r\n ' \r\n ' \r\n ' \r\n 
                      (if_block_statement IF 
                        (expr 
                          (variable_or_function_call PrevCarReturn)) THEN \r\n 
                        (then_block 
                          (statement 
                            (assignment_statement 
                              (variable_or_function_call PrevCarReturn) = 
                              (expr 
                                (variable_or_function_call FALSE)))) \r\n 
                          (statement 
                            (assignment_statement 
                              (variable_or_function_call FileChar$) = 
                              (expr 
                                (expr 
                                  (variable_or_function_call LineFeed$)) + 
                                (expr 
                                  (variable_or_function_call FileChar$))))) \r\n) 
                        (end_if_statement END IF)) \r\n \r\n)) 
                  (end_select_statement END SELECT))) \r\n \r\n ' \r\n 
              (statement 
                (print_statement PRINT 
                  (file_number # 
                    (expr 
                      (literal 2))) , 
                  (print_argument 
                    (expr 
                      (variable_or_function_call FileChar$)) ;))) \r\n) LOOP)) \r\n \r\n ' \r\n 
        (statement 
          (if_inline_statement IF 
            (expr 
              (variable_or_function_call PrevCarReturn)) THEN 
            (if_inline_action 
              (statement 
                (print_statement PRINT 
                  (file_number # 
                    (expr 
                      (literal 2))) , 
                  (print_argument 
                    (expr 
                      (variable_or_function_call LineFeed$)) ;)))))) \r\n \r\n 
        (statement 
          (close_statement CLOSE)) ' \r\n 
        (statement 
          (print_statement PRINT 
            (print_argument 
              (expr 
                (literal "Another file 
                  (Y/N)?"))))) ' \r\n \r\n ' \r\n 
        (statement 
          (assignment_statement 
            (variable_or_function_call More$) = 
            (expr 
              (variable_or_function_call UCASE$ 
                ( 
                  (argument_list 
                    (argument 
                      (expr 
                        (builtin_function 
                          (input_function INPUT$ 
                            ( 
                              (expr 
                                (literal 1)) )))))) ))))) \r\n \r\n ' \r\n) LOOP 
      (loop_condition WHILE 
        (expr 
          (expr 
            (variable_or_function_call More$)) = 
          (expr 
            (literal "Y")))))) \r\n 
  (statement 
    (end_statement END)) \r\n \r\n 
  (label 
    (text_label 
      (untyped_id ErrorHandler)) :) ' \r\n 
  (statement 
    (const_statement CONST 
      (const_assignment NOFILE = 
        (const_expr 
          (expr 
            (literal 53)))) , 
      (const_assignment FILEEXISTS = 
        (const_expr 
          (expr 
            (literal 58)))))) \r\n \r\n ' \r\n 
  (statement 
    (select_case_statement SELECT CASE 
      (expr 
        (variable_or_function_call ERR)) 
      (before_first_case \r\n) 
      (case_block 
        (case_statement CASE 
          (case_expr 
            (expr 
              (variable_or_function_call NOFILE)))) 
        (block ' \r\n ' \r\n 
          (statement 
            (print_statement PRINT 
              (print_argument 
                (expr 
                  (literal "No such file in current directory."))))) \r\n 
          (statement 
            (input_statement INPUT "Enter new name: " , 
              (variable_or_function_call OutFile$))) \r\n 
          (statement 
            (assignment_statement 
              (variable_or_function_call InFile$) = 
              (expr 
                (variable_or_function_call Backup$ 
                  ( 
                    (argument_list 
                      (argument 
                        (expr 
                          (variable_or_function_call OutFile$)))) ))))) \r\n 
          (statement 
            (resume_statement RESUME)) \r\n)) 
      (case_block 
        (case_statement CASE 
          (case_expr 
            (expr 
              (variable_or_function_call FILEEXISTS)))) 
        (block ' \r\n ' \r\n ' \r\n 
          (statement 
            (call_statement 
              (untyped_id KILL) 
              (argument_list 
                (argument 
                  (expr 
                    (variable_or_function_call InFile$)))))) \r\n 
          (statement 
            (resume_statement RESUME)) \r\n)) 
      (case_block 
        (case_statement CASE ELSE) 
        (block ' \r\n ' \r\n 
          (statement 
            (on_error_statement ON ERROR GOTO 
              (target 
                (line_number 0)))) \r\n)) 
      (end_select_statement END SELECT))) \r\n ' \r\n ' \r\n ' \r\n ' \r\n ' \r\n ' \r\n ' \r\n 
  (function_statement FUNCTION Backup$ 
    ( 
      (parameter_list 
        (parameter FileName$)) ) STATIC 
    (block \r\n \r\n ' \r\n 
      (statement 
        (assignment_statement 
          (variable_or_function_call Extension) = 
          (expr 
            (builtin_function 
              (instr_function INSTR 
                ( 
                  (expr 
                    (variable_or_function_call FileName$)) , 
                  (expr 
                    (literal ".")) )))))) \r\n \r\n ' \r\n 
      (if_block_statement IF 
        (expr 
          (expr 
            (variable_or_function_call Extension)) > 
          (expr 
            (literal 0))) THEN \r\n 
        (then_block 
          (statement 
            (assignment_statement 
              (variable_or_function_call Backup$) = 
              (expr 
                (expr 
                  (variable_or_function_call LEFT$ 
                    ( 
                      (argument_list 
                        (argument 
                          (expr 
                            (variable_or_function_call FileName$))) , 
                        (argument 
                          (expr 
                            (expr 
                              (variable_or_function_call Extension)) - 
                            (expr 
                              (literal 1))))) ))) + 
                (expr 
                  (literal ".BAK"))))) \r\n \r\n ' \r\n) 
        (else_block_statement ELSE 
          (else_block \r\n 
            (statement 
              (assignment_statement 
                (variable_or_function_call Backup$) = 
                (expr 
                  (expr 
                    (variable_or_function_call FileName$)) + 
                  (expr 
                    (literal ".BAK"))))) \r\n)) 
        (end_if_statement END IF)) \r\n) 
    (end_function_statement END FUNCTION)) \r\n <EOF>)
