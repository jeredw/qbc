export interface Color {
  red: number;
  green: number;
  blue: number;
}

export const DEFAULT_PALETTE: Color[] = [
  { red: 0, green: 0, blue: 0 },
  { red: 0, green: 0, blue: 170 },
  { red: 0, green: 170, blue: 0 },
  { red: 0, green: 170, blue: 170 },
  { red: 170, green: 0, blue: 0 },
  { red: 170, green: 0, blue: 170 },
  { red: 170, green: 85, blue: 0 },
  { red: 170, green: 170, blue: 170 },
  { red: 85, green: 85, blue: 85 },
  { red: 85, green: 85, blue: 255 },
  { red: 85, green: 255, blue: 85 },
  { red: 85, green: 255, blue: 255 },
  { red: 255, green: 85, blue: 85 },
  { red: 255, green: 85, blue: 255 },
  { red: 255, green: 255, blue: 85 },
  { red: 255, green: 255, blue: 255 },
  { red: 0, green: 0, blue: 0 },
  { red: 20, green: 20, blue: 20 },
  { red: 32, green: 32, blue: 32 },
  { red: 44, green: 44, blue: 44 },
  { red: 56, green: 56, blue: 56 },
  { red: 68, green: 68, blue: 68 },
  { red: 80, green: 80, blue: 80 },
  { red: 97, green: 97, blue: 97 },
  { red: 113, green: 113, blue: 113 },
  { red: 129, green: 129, blue: 129 },
  { red: 145, green: 145, blue: 145 },
  { red: 161, green: 161, blue: 161 },
  { red: 182, green: 182, blue: 182 },
  { red: 202, green: 202, blue: 202 },
  { red: 226, green: 226, blue: 226 },
  { red: 255, green: 255, blue: 255 },
  { red: 0, green: 0, blue: 255 },
  { red: 64, green: 0, blue: 255 },
  { red: 125, green: 0, blue: 255 },
  { red: 190, green: 0, blue: 255 },
  { red: 255, green: 0, blue: 255 },
  { red: 255, green: 0, blue: 190 },
  { red: 255, green: 0, blue: 125 },
  { red: 255, green: 0, blue: 64 },
  { red: 255, green: 0, blue: 0 },
  { red: 255, green: 64, blue: 0 },
  { red: 255, green: 125, blue: 0 },
  { red: 255, green: 190, blue: 0 },
  { red: 255, green: 255, blue: 0 },
  { red: 190, green: 255, blue: 0 },
  { red: 125, green: 255, blue: 0 },
  { red: 64, green: 255, blue: 0 },
  { red: 0, green: 255, blue: 0 },
  { red: 0, green: 255, blue: 64 },
  { red: 0, green: 255, blue: 125 },
  { red: 0, green: 255, blue: 190 },
  { red: 0, green: 255, blue: 255 },
  { red: 0, green: 190, blue: 255 },
  { red: 0, green: 125, blue: 255 },
  { red: 0, green: 64, blue: 255 },
  { red: 125, green: 125, blue: 255 },
  { red: 157, green: 125, blue: 255 },
  { red: 190, green: 125, blue: 255 },
  { red: 222, green: 125, blue: 255 },
  { red: 255, green: 125, blue: 255 },
  { red: 255, green: 125, blue: 222 },
  { red: 255, green: 125, blue: 190 },
  { red: 255, green: 125, blue: 157 },
  { red: 255, green: 125, blue: 125 },
  { red: 255, green: 157, blue: 125 },
  { red: 255, green: 190, blue: 125 },
  { red: 255, green: 222, blue: 125 },
  { red: 255, green: 255, blue: 125 },
  { red: 222, green: 255, blue: 125 },
  { red: 190, green: 255, blue: 125 },
  { red: 157, green: 255, blue: 125 },
  { red: 125, green: 255, blue: 125 },
  { red: 125, green: 255, blue: 157 },
  { red: 125, green: 255, blue: 190 },
  { red: 125, green: 255, blue: 222 },
  { red: 125, green: 255, blue: 255 },
  { red: 125, green: 222, blue: 255 },
  { red: 125, green: 190, blue: 255 },
  { red: 125, green: 157, blue: 255 },
  { red: 182, green: 182, blue: 255 },
  { red: 198, green: 182, blue: 255 },
  { red: 218, green: 182, blue: 255 },
  { red: 234, green: 182, blue: 255 },
  { red: 255, green: 182, blue: 255 },
  { red: 255, green: 182, blue: 234 },
  { red: 255, green: 182, blue: 218 },
  { red: 255, green: 182, blue: 198 },
  { red: 255, green: 182, blue: 182 },
  { red: 255, green: 198, blue: 182 },
  { red: 255, green: 218, blue: 182 },
  { red: 255, green: 234, blue: 182 },
  { red: 255, green: 255, blue: 182 },
  { red: 234, green: 255, blue: 182 },
  { red: 218, green: 255, blue: 182 },
  { red: 198, green: 255, blue: 182 },
  { red: 182, green: 255, blue: 182 },
  { red: 182, green: 255, blue: 198 },
  { red: 182, green: 255, blue: 218 },
  { red: 182, green: 255, blue: 234 },
  { red: 182, green: 255, blue: 255 },
  { red: 182, green: 234, blue: 255 },
  { red: 182, green: 218, blue: 255 },
  { red: 182, green: 198, blue: 255 },
  { red: 0, green: 0, blue: 113 },
  { red: 28, green: 0, blue: 113 },
  { red: 56, green: 0, blue: 113 },
  { red: 85, green: 0, blue: 113 },
  { red: 113, green: 0, blue: 113 },
  { red: 113, green: 0, blue: 85 },
  { red: 113, green: 0, blue: 56 },
  { red: 113, green: 0, blue: 28 },
  { red: 113, green: 0, blue: 0 },
  { red: 113, green: 28, blue: 0 },
  { red: 113, green: 56, blue: 0 },
  { red: 113, green: 85, blue: 0 },
  { red: 113, green: 113, blue: 0 },
  { red: 85, green: 113, blue: 0 },
  { red: 56, green: 113, blue: 0 },
  { red: 28, green: 113, blue: 0 },
  { red: 0, green: 113, blue: 0 },
  { red: 0, green: 113, blue: 28 },
  { red: 0, green: 113, blue: 56 },
  { red: 0, green: 113, blue: 85 },
  { red: 0, green: 113, blue: 113 },
  { red: 0, green: 85, blue: 113 },
  { red: 0, green: 56, blue: 113 },
  { red: 0, green: 28, blue: 113 },
  { red: 56, green: 56, blue: 113 },
  { red: 68, green: 56, blue: 113 },
  { red: 85, green: 56, blue: 113 },
  { red: 97, green: 56, blue: 113 },
  { red: 113, green: 56, blue: 113 },
  { red: 113, green: 56, blue: 97 },
  { red: 113, green: 56, blue: 85 },
  { red: 113, green: 56, blue: 68 },
  { red: 113, green: 56, blue: 56 },
  { red: 113, green: 68, blue: 56 },
  { red: 113, green: 85, blue: 56 },
  { red: 113, green: 97, blue: 56 },
  { red: 113, green: 113, blue: 56 },
  { red: 97, green: 113, blue: 56 },
  { red: 85, green: 113, blue: 56 },
  { red: 68, green: 113, blue: 56 },
  { red: 56, green: 113, blue: 56 },
  { red: 56, green: 113, blue: 68 },
  { red: 56, green: 113, blue: 85 },
  { red: 56, green: 113, blue: 97 },
  { red: 56, green: 113, blue: 113 },
  { red: 56, green: 97, blue: 113 },
  { red: 56, green: 85, blue: 113 },
  { red: 56, green: 68, blue: 113 },
  { red: 80, green: 80, blue: 113 },
  { red: 89, green: 80, blue: 113 },
  { red: 97, green: 80, blue: 113 },
  { red: 105, green: 80, blue: 113 },
  { red: 113, green: 80, blue: 113 },
  { red: 113, green: 80, blue: 105 },
  { red: 113, green: 80, blue: 97 },
  { red: 113, green: 80, blue: 89 },
  { red: 113, green: 80, blue: 80 },
  { red: 113, green: 89, blue: 80 },
  { red: 113, green: 97, blue: 80 },
  { red: 113, green: 105, blue: 80 },
  { red: 113, green: 113, blue: 80 },
  { red: 105, green: 113, blue: 80 },
  { red: 97, green: 113, blue: 80 },
  { red: 89, green: 113, blue: 80 },
  { red: 80, green: 113, blue: 80 },
  { red: 80, green: 113, blue: 89 },
  { red: 80, green: 113, blue: 97 },
  { red: 80, green: 113, blue: 105 },
  { red: 80, green: 113, blue: 113 },
  { red: 80, green: 105, blue: 113 },
  { red: 80, green: 97, blue: 113 },
  { red: 80, green: 89, blue: 113 },
  { red: 0, green: 0, blue: 64 },
  { red: 16, green: 0, blue: 64 },
  { red: 32, green: 0, blue: 64 },
  { red: 48, green: 0, blue: 64 },
  { red: 64, green: 0, blue: 64 },
  { red: 64, green: 0, blue: 48 },
  { red: 64, green: 0, blue: 32 },
  { red: 64, green: 0, blue: 16 },
  { red: 64, green: 0, blue: 0 },
  { red: 64, green: 16, blue: 0 },
  { red: 64, green: 32, blue: 0 },
  { red: 64, green: 48, blue: 0 },
  { red: 64, green: 64, blue: 0 },
  { red: 48, green: 64, blue: 0 },
  { red: 32, green: 64, blue: 0 },
  { red: 16, green: 64, blue: 0 },
  { red: 0, green: 64, blue: 0 },
  { red: 0, green: 64, blue: 16 },
  { red: 0, green: 64, blue: 32 },
  { red: 0, green: 64, blue: 48 },
  { red: 0, green: 64, blue: 64 },
  { red: 0, green: 48, blue: 64 },
  { red: 0, green: 32, blue: 64 },
  { red: 0, green: 16, blue: 64 },
  { red: 32, green: 32, blue: 64 },
  { red: 40, green: 32, blue: 64 },
  { red: 48, green: 32, blue: 64 },
  { red: 56, green: 32, blue: 64 },
  { red: 64, green: 32, blue: 64 },
  { red: 64, green: 32, blue: 56 },
  { red: 64, green: 32, blue: 48 },
  { red: 64, green: 32, blue: 40 },
  { red: 64, green: 32, blue: 32 },
  { red: 64, green: 40, blue: 32 },
  { red: 64, green: 48, blue: 32 },
  { red: 64, green: 56, blue: 32 },
  { red: 64, green: 64, blue: 32 },
  { red: 56, green: 64, blue: 32 },
  { red: 48, green: 64, blue: 32 },
  { red: 40, green: 64, blue: 32 },
  { red: 32, green: 64, blue: 32 },
  { red: 32, green: 64, blue: 40 },
  { red: 32, green: 64, blue: 48 },
  { red: 32, green: 64, blue: 56 },
  { red: 32, green: 64, blue: 64 },
  { red: 32, green: 56, blue: 64 },
  { red: 32, green: 48, blue: 64 },
  { red: 32, green: 40, blue: 64 },
  { red: 44, green: 44, blue: 64 },
  { red: 48, green: 44, blue: 64 },
  { red: 52, green: 44, blue: 64 },
  { red: 60, green: 44, blue: 64 },
  { red: 64, green: 44, blue: 64 },
  { red: 64, green: 44, blue: 60 },
  { red: 64, green: 44, blue: 52 },
  { red: 64, green: 44, blue: 48 },
  { red: 64, green: 44, blue: 44 },
  { red: 64, green: 48, blue: 44 },
  { red: 64, green: 52, blue: 44 },
  { red: 64, green: 60, blue: 44 },
  { red: 64, green: 64, blue: 44 },
  { red: 60, green: 64, blue: 44 },
  { red: 52, green: 64, blue: 44 },
  { red: 48, green: 64, blue: 44 },
  { red: 44, green: 64, blue: 44 },
  { red: 44, green: 64, blue: 48 },
  { red: 44, green: 64, blue: 52 },
  { red: 44, green: 64, blue: 60 },
  { red: 44, green: 64, blue: 64 },
  { red: 44, green: 60, blue: 64 },
  { red: 44, green: 52, blue: 64 },
  { red: 44, green: 48, blue: 64 },
  { red: 0, green: 0, blue: 0 },
  { red: 0, green: 0, blue: 0 },
  { red: 0, green: 0, blue: 0 },
  { red: 0, green: 0, blue: 0 },
  { red: 0, green: 0, blue: 0 },
  { red: 0, green: 0, blue: 0 },
  { red: 0, green: 0, blue: 0 },
  { red: 0, green: 0, blue: 0 },
];

export function egaIndexToColor(index: number): Color {
  return {
    red: 85 * (((index >> 1) & 2) | (index >> 5) & 1),
    green: 85 * ((index & 2) | (index >> 4) & 1),
    blue: 85 * (((index << 1) & 2) | (index >> 3) & 1)
  };
}

export function vgaIndexToColor(index: number): Color {
  return {
    red: Math.floor(255 * ((index & 0x3f) / 63)),
    green: Math.floor(255 * (((index >> 8) & 0x3f) / 63)),
    blue: Math.floor(255 * (((index >> 16) & 0x3f) / 63))
  }
}

export function monoIndexToColor(index: number): Color {
  if (index < 3) {
    return { red: 0, green: 0, blue: 0 };
  }
  if (index < 6) {
    return { red: 85, green: 85, blue: 85 };
  }
  return { red: 255, green: 255, blue: 255 };
}

export function colorToGrayScale(color: Color): Color {
  const intensity = .11 * (color.blue / 255) + .59 * (color.green / 255) + .3 * (color.red / 255);
  return {
    red: Math.floor(255 * intensity),
    green: Math.floor(255 * intensity),
    blue: Math.floor(255 * intensity)
  };
}

export function cssForColorIndex(index: number): string {
  return `rgba(${index}, 0, 0, 255)`;
}

export const VGA_INDEX_TO_EGA_INDEX_4BIT: number[] = [
   0,  1,  2,  3,  4,  5,  6,  7,
  -1, -1, -1, -1, -1, -1, -1, -1,
   8,  9, 10, 11, 12, 13, 14, 15,
];

export const VGA_INDEX_TO_EGA_INDEX_6BIT: number[] = [
   0,  1,  2,  3,  4,  5, -1,  7,
  -1, -1, -1, -1, -1, -1, -1, -1,
  -1, -1, -1, -1,  6, -1, -1, -1,
  -1, -1, -1, -1, -1, -1, -1, -1,
  -1, -1, -1, -1, -1, -1, -1, -1,
  -1, -1, -1, -1, -1, -1, -1, -1,
  -1, -1, -1, -1, -1, -1, -1, -1,
   8,  9, 10, 11, 12, 13, 14, 15,
];